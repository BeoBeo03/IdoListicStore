<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cart</title>
    <link rel="stylesheet" href="./css/Home.css">
    <link rel="stylesheet" href="./css/Cart.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">

</head>
<body>
    <div class="header">
        <div class="header_content">
            <a class="header_content_logo" href="./index.html">
                <img src="./img/logo.png" alt="">
            </a>
            <div style="width: 130px; height: 100%" class="header_content_category">
                <a href="" class="header_content_list">
                    <span>S·∫£n ph·∫©m</span>
                    <i class="fa-solid fa-caret-down"></i>
                </a>
                <div style="height: 150px;" class="header_content_product">
                    <a href="./MenuAlbum.html">

                        <span>Album</span>
                    </a>
                    <a href="./MenuLightStick.html">

                        <span>Lightstick</span>
                    </a>
                    <a href="./MenuMerchandise.html">

                        <span>Merchandise</span>
                    </a>

                </div>
            </div>
            <div class="header_content_items">
                <a href="./Cart.html">
                    <i class="fa-solid fa-cart-shopping"></i>
                    <span>Gi·ªè h√†ng</span>
                </a>
            </div>

        </div>
    </div>
    <div style="margin-left: 150px;font-size: 20px;" class="navigation_link_cart ">
        <a href="./index.html">Home</a></a> -> <a style="color:pink;" href="">Cart</a>
    </div>
    <!-- cart -->
    <div style="margin-top: 25px;margin-bottom: 125px;background-color: #fbf2f3;border-radius: 10px;padding: 20px;" class="container">
        <h3>Gi·ªè h√†ng</h3>
        <p id="message"></p>
        <table id="cart" class="table table-hover table-condensed">
            <thead>
                <tr>
                    <th style="width:50%">S·∫£n ph·∫©m</th>
                    <th style="width:10%;padding:5px 5px 5px 0">Gi√° ti·ªÅn</th>
                    <th style="width:10%">S·ªë l∆∞·ª£ng</th>
                    <th style="width:0%" class="text-center"></th>
                    <th style="width:30%;text-align: center;">T·ªïng gi√°</th>
                </tr>
            </thead>
            <tbody id="tbody">
            </tbody>
            <tfoot>
                <tr style="margin: 20px 0;height: 150px;">
                    <td>
                        <div style="margin-bottom: 10px;" class="controls">
                            <label for="nameholder" style="margin-bottom: 10px;" class="control-label">H·ªç t√™n ng∆∞·ªùi nh·∫≠n: </label>
                            <samp></samp>
                            <input id="nameholder" class="billing-address-name form-control" type="text" name="hoten" placeholder="H·ªç t√™n">
                        </div>
                        <div class="controls">
                            <label for="address" style="margin-bottom: 10px;" class="control-label">ƒê·ªãa ch·ªâ giao: </label>
                            <samp></samp>
                            <input id="address" style="margin-bottom: 20px;" class="form-control" type="text" name="diachigiao" placeholder="ƒê·ªãa ch·ªâ giao">
                        </div>
                    </td>
                    <td></td>
                    <td >
                       
                    </td>
                    <td>
                        
                    </td>
                    <td>
                        <div style="margin-left: 30px;" class="payment">
                            <div class="radio-input">
                                <h4>Ph∆∞∆°ng th·ª©c thanh to√°n</h4>
                                <input style="display: inline-block;" id="COD" name="radio" type="radio" class="input" checked="">
                                <label style="margin-right: 80px;" for="COD">Thanh to√°n khi nh·∫≠n h√†ng </label>
                                <input style="display: inline-block;" id="banking" name="radio" type="radio" class="input">
                                <label for="banking">Thanh to√°n qua th·∫ª t√≠n d·ª•ng</label>
                                
                              </div>
                            <div id="banking-options" style="display: none;">
                                <select id="payment-method">
                                    
                                    <option value="paypal">PayPal</option>
                                    <option value="momo">Momo</option>
                                    <option value="atm">Visa</option>
                                </select>
                                
                            </div>
                        </div>
                    </td>
                </tr>
                <tr style="height: 150px;">
                    <td><a href="./index.html" class="btn btn-warning"><i class="fa fa-angle-left"></i> Ti·∫øp t·ª•c mua
                            h√†ng</a></td>
                    <td style="text-align: right;" onclick="clearCart()"><a style="background-color: rgb(250, 73, 73);" href="" class="btn btn-success btn-block">X√≥a</a></td>
                    
                    <td><button class="btn btn-success btn-block" onclick="validateInputs()">X√°c nh·∫≠n</button></td>
                    
                    <td></td>
                    <td style="width:1000px" class="hidden-xs text-center"><strong style="font-size:20px;"
                        id="total"></strong></td>
                </tr>
            </tfoot>
        </table>
    </div>
    <!--  -->
    <div class="footer">
        <div class="footer_container">
            <div class="footer_container_brand">
                <div class="footer_logo">
                    <a href="./index.html">
                        <img src="./img/logo.png" alt="">
                    </a>
                    <div class="footer_logo_internet">
                        <a href="https://www.facebook.com/profile.php?id=100009418012261&locale=vi_VN"><i class="fa-brands fa-facebook"></i></a>
                        <a href="https://www.instagram.com/_caniburweaknd_/"><i class="fa-brands fa-instagram"></i></a>
                        
                    </div>
                </div>
                <div class="footer_list">
                    <div class="footer_list_heading"><a style="color: #eb2aab; margin-top: 0; text-decoration: none;" href="./MenuAlbum.html">ALBUM</a></div>
                    <p href="">
                        Photobook ver
                    </p>
                    <p href="">
                        QR ver
                    </p>
                    <p href="">
                        Standard ver
                    </p>
                </div>
                <div class="footer_list">
                    <div class="footer_list_heading"><a style="color: #eb2aab; margin-top: 0; text-decoration: none;" href="./MenuLightStick.html">LIGHTSTICK</a></div>
                    <p href="">
                        LightStick
                    </p>
                    <p href="">
                        Light Ring
                    </p>
                </div>
                <div class="footer_list">
                    <div class="footer_list_heading"><a style="color: #eb2aab; margin-top: 0; text-decoration: none;" href="./MenuMerchandise.html">MERCHANDISE</a></div>
                    <p href="">
                        Card bo g√≥c
                    </p>
                    <p href="">
                        ƒê·ªì trang tr√≠
                    </p>
                    <p href="">
                        S·∫£n ph·∫©m kh√°c
                    </p>
                </div>
            </div>
            <div class="footer_line">

            </div>
            <div class="footer_copyright">
                ¬©2024 IDOLISTIC International Corp. All Rights Reserved. 
            </div>
            <div class="footer_contact">
                Li√™n h·ªá: uel@gmail.com
            </div>
        </div>
    </div>
    <section id="btnSection" style="position: fixed;z-index: 1;bottom: 2em;right: 2em;">
        <div class="contact tooltip-container">
            <button class="text"  style="width: 180px;height: 60px;border: none;background-color: #ed3fb3;border-radius: 10px;font-size: 24px;cursor: pointer;color: white;" ><i style="font-size: 24px;margin-right: 5px;" class="fa-regular fa-comment"></i> Li√™n h·ªá</button>
            <span class="tooltip">Click Me</span>
            
            <span>Hello! üëã</span>
        </div>
        <div class="overlay"></div>
        <div class="contact_items">
            
           <a  href="tel:0984858917">
            <div class="contact_item"><img src="./img/icon_phone3.jpg" alt=""><span>0984858917</span></div>
           </a>
           <a  href="https://zalo.me/0984858917">
            <div class="contact_item"><img src="./img/icon_zl.jpg" alt=""><span>0984 85 89 17</span></div>
           </a>
           <a  href="https://www.facebook.com/profile.php?id=100009418012261&locale=vi_VN">
            <div class="contact_item"><img src="./img/icon_fb.png" alt=""><span>Facebook</span></div>
           </a>
        </div>
    </section>
    <script>
        var cart = [];
        cart = JSON.parse(localStorage.getItem("CART")) || [];
        // list ca 3 san pham
        const list = {
            items : [
            {
                    id: "album_01",
                    title: "ALBUM TEAYONG - TAP FLIP ZINE",
                    img: "./img/IMG_ALBUM/01_teayong.png",
                    price: 280000,
                    content: null,
                    imgDescription: "./img/IMG_ALBUM/01_teayong_dt.png"
                },
                {
                    id: "album_02",
                    title: "ALBUM IU - LOVE POEM",
                    img: "./img/IMG_ALBUM/02_lovePoem.png",
                    price: 380000,
                    content: [
                        "Disc: 1",
                        "Size: 140 * 190 * 12(mm)",
                        "Photo cart: Random 1p out of 2p",
                        "Bookmark: Random 1p out of 2p",
                        "Poster: 1p(For the First press only)"
                    ],
                    imgDescription: "./img/IMG_ALBUM/02_lovePoem_dt.png"
                },
                {
                    id: "album_03",
                    title: "ALBUM IU - PALETTE",
                    img: "./img/IMG_ALBUM/03_palette.png",
                    price: 420000,
                    content: null,
                    imgDescription: "./img/IMG_ALBUM/03_palette_dt.png"
                },
                {
                    id: "album_04",
                    title: "ALBUM IU - THE WINNING",
                    img: "./img/IMG_ALBUM/04_theWinning.png",
                    price: 490000,
                    content: [
                        "SLEEVE: 176.5*242*19.5(mm)",
                        "PHOTOBOOK: 172*242*17(mm) / 148p",
                        "DISC 1: 120*120(mm)",
                        "AccordionPhotoCart: 99 * 107(mm) / spread 528* 107(mm) / 1EA(Image varies by version)",
                        "MUGSHOT PHOTO CARt: 100 * 148(mm) / 1EA(Image varies by version)",
                        "CROSSWORD PUZZLE POSTCARt: 120 * 120(mm) / 1EA(Image varies by version)",
                        "LOGO STICKER: 3EA(Image varies by version)",
                        "HIDDEN MESSAGE CARt: 128 * 182(mm) / 1EA(Image varies by version)",
                        "PHOTO CARt: 55 * 85(mm) / 3EA(Image varies by version)"
                    ],
                    imgDescription: "./img/IMG_ALBUM/04_theWinning_dt.png"
                },
                {
                    id: "album_05",
                    title: "ALBUM LISA (BLACKPINK) - LALISA",
                    img: "./img/IMG_ALBUM/05_lisa.png",
                    price: 430000,
                    content: [
                        "PACKAGE BOX : 177 x 257 x 34 (mm)",
                        "PHOTOBOOK : 167 x 247(mm) / 88P",
                        "LYRICS PAPAER : 140 x 195(mm) / 1EA",
                        "RANDOM PHOTOCARt : Random 1p out of 4p",
                        "RANDOM POLAROID : Random 1p out of 4p",
                        "DOUBLE - SIDED POSTER : 1EA",
                        "RANDOM RARE GOLD PHOTOCARt : Random 1p out of 4p(First Press Only)",
                        "RARE GOLD TICKET : 1EA / ONLY 50EA(Randomly included only in some quantities of first press albums / not included in all first press)"
                    ],
                    imgDescription: "./img/IMG_ALBUM/05_lisa_dt.png"
                },
                {
                    id: "album_06",
                    title: "ALBUM SEULGI - 28 REASONS PHOTOBOOK VER",
                    img: "./img/IMG_ALBUM/06_seulgi.png",
                    price: 350000,
                    content: [
                        "COVER 1ea",
                        "PHOTOBOOK 64p",
                        "MINI POSTER: Random 1 out of 4",
                        "PHOTOCARt: Random 1 out of 3 (Image varies with Special Ver., Case Ver.)",
                        "FIRST-PRESS ONLY POSTER: Random 1 out of 2"
                    ],
                    imgDescription: "./img/IMG_ALBUM/06_seulgi_dt.png"
                },
                {
                    id: "album_07",
                    title: "ALBUM TEMPEST - TEMPEST VOYAGE",
                    img: "./img/IMG_ALBUM/07_tempest.png",
                    price: 270000,
                    content: [
                        "PACKAGE 152 x 214 x 20 mm",
                        "PHOTO BOOK 150 x 200 mm / 1EA / 84p / Partly Thermochromic Printed on Cover",
                        "LYRIC BOOK 110 x 145 mm / 32p",
                        "CD-R 125 x 125 mm",
                        "POSTCARt 150 x 210 mm / 21EA with Members' Handwritten Messages on the Back",
                        "PHOTO CARt (unit) 55 x 85 mm / Random 1 out of 3",
                        "PHOTO CARt (unit) 55 x 85 mm / Random 1 out of 14",
                        "PRINTED POLAROID 100 x 125 mm / Random 1 out of 7",
                        "STICKER 150 x 100 mm / 1EA",
                        "PHOTO FILM (SAIL VER. ONLY) 85 x 45 mm / Random 1 out of 7",
                        "FOLDED POSTER 300 x 210 mm"

                    ],
                    imgDescription: "./img/IMG_ALBUM/07_tempest_dt.png"
                },
                {
                    id: "album_08",
                    title: "ALBUM TWICE - WITH YOU-TH",
                    img: "./img/IMG_ALBUM/08_twice.png",
                    price: 380000,
                    content: [
                        "PHOTOBOOK 3 TYPES",
                        "PHOTOCARt (RANDOM 5 OUT OF 45)",
                        "CD-R 3 TYPE",
                        "LETTER POSTER (RANDOM 1 OUT OF 9)",
                        "3-CUT PHOTO (RANDOM 1 OUT OF 3)",
                        "STICKER 3EA",
                        "FLIM PHOTOCARt (RANDOM 1 OUT OF 9)",
                        "ENVELOPE 1 TYPE"
                    ],
                    imgDescription: "./img/IMG_ALBUM/08_twice_dt.png"
                },
                {
                    id: "album_09",
                    title: "ALBUM WENDY - WISH YOU HELL",
                    img: "./img/IMG_ALBUM/09_wendy.png",
                    price: 320000,
                    content: null,
                    imgDescription: "./img/IMG_ALBUM/09_wendy_dt.png"
                },
                {
                    id: "album_10",
                    title: "ALBUM XIKERS [HOUSE OF TRICKY : HOW TO PLAY]",
                    img: "./img/IMG_ALBUM/10_xikers.png",
                    price: 280000,
                    content: [
                        "OUT BOX : 185*180 / 1ea (Image varies by version)",
                        "FOLDED POSTER : 340*510 / 1ea (Image varies by version)",
                        "PHOTOBOOK : 170*170 / 1ea (Image varies by version)",
                        "HEART POSTCARt : 100*150 / Random 1 out of 9 (Image varies by version)",
                        "DISC PACK : 120*120 / 1ea (Image varies by version)",
                        "MOVING PHOTO : 80*130 / 1ea (Image varies by version)",
                        "WIDE POLAROID : 110*80 / Random 1 out of 20 (Image varies by version)",
                        "PHOTOCARt : 55*85 / Random 2 out of 18 (Image varies by version)",
                        "TUTORIAL BOOK : 58*93 / 1ea (Image varies by version)",
                        "MAGNETIC COIN : 40*40 / 1ea (Image varies by version)"
                    ],
                    imgDescription: "./img/IMG_ALBUM/10_xikers_dt.png"
                },
            ]
        }
        let renderCart = () => {
            let message = document.querySelector(".container #message")
            let listCart = document.querySelector("#cart");
            let cartIcon = document.querySelector(".header_content_items a[href='./Cart.html'] span");
            if (cart.length !== 0) {
                let tbody = listCart.querySelector("#tbody");
                tbody.innerHTML = cart.map((product) => {
                    let search = cart.find((item) => item.id === product.id) || [];
                    return `<tr style="height: 120px;border-bottom: 1px solid #dee2e6;">
                    <td data-th="Product">
                        <div class="row">
                            <div class="col-sm-2 hidden-xs"><img style="width: 100px;height: 80px;" src="${product.img}"
                                    alt="..." class="img-responsive" /></div>
                            <div class="col-sm-10">
                                <h5 style="text-align:left;" class="nomargin">${product.title}</h5>
                            </div>
                        </div>
                    </td>
                    <td style="border: none; display: flex; border: none; margin-top: 34px;padding: .5rem .5rem;
                  " data-th="Price">${product.price.toLocaleString('vi-VN')} VND</td>

                    <td style="margin-top:26px;" data-th="Quantity">
                        <div class="buttons">
                            <i onclick="decrementItem(${product.id})" class="fa-solid fa-minus"></i>
                            <div id="${product.id}" class="quantity">${search.item === undefined ? 0 : search.item}</div>
                            <i onclick="incrementItem(${product.id})" class="fa-solid fa-plus"></i>
                        </div>
                    </td>

                    <td></td>

                    <td class="text-center actions" style="padding-top: 35px;
                    margin-top: 100px;">
                        <span>${(product.item * product.price).toLocaleString('vi-VN')} VND</span>
                    </td>
                </tr>`
                }).join("")
                total()
                // T√≠nh t·ªïng s·ªë l∆∞·ª£ng trong gi·ªè h√†ng
                let totalQuantity = cart.reduce((acc, currentValue) => acc + currentValue.item, 0);

                // C·∫≠p nh·∫≠t bi·ªÉu t∆∞·ª£ng gi·ªè h√†ng v·ªõi t·ªïng s·ªë l∆∞·ª£ng
                cartIcon.innerText = totalQuantity;
            } else {
                let tbody = listCart.querySelector("#tbody");
                message.innerText = "Cart is empty"
                tbody.innerHTML = "";
                total();
                cartIcon.innerText = 0;
            }
        }
        let incrementItem = (id) => {
            let selectedItem = id;
            let itemInList = list.items.find((product) => product.id === selectedItem.id);
            let search = cart.find((product) => product.id === selectedItem.id);
            if (search === undefined) {
                cart.push({
                    id: selectedItem.id,
                    item: 1,
                    title: itemInList.title,
                    price: itemInList.price,
                    img: itemInList.img
                })
            } else {
                search.item += 1;
            }

            renderCart()
            total()
            localStorage.setItem("CART", JSON.stringify(cart));
        }

        // decrement
        let decrementItem = (id) => {
            let selectedItem = id;
            let itemInList = list.items.find((product) => product.id === selectedItem.id);
            let search = cart.find((product) => product.id === selectedItem.id);
            if (search === undefined) return;
            if (search.item === 0) {
                return;
            } else {
                search.item -= 1;
            }

            cart = cart.filter((product) => product.item !== 0)
            renderCart();
            total()
            localStorage.setItem("CART", JSON.stringify(cart));
        }
        let total = () => {
            document.querySelector("#total").innerText = "T·ªïng ti·ªÅn: " + cart.reduce(function (acc, currentValue) {
                return acc += (currentValue.price * currentValue.item);
            }, 0).toLocaleString('vi-VN')+ " VNƒê";
        }
        let clearCart = () => {
            if (confirm('b·∫°n c√≥ ch·∫Øc mu·ªën x√≥a h·∫øt kh√¥ng?')) {
                cart = []
                renderCart();
                localStorage.setItem("CART", JSON.stringify(cart));
            }
        }

        // payment
        document.getElementById("banking").addEventListener("change", function() {
        var bankingOptions = document.getElementById("banking-options");
        if (this.checked) {
            
           
            bankingOptions.style.display = "block";
        } else {
            bankingOptions.style.display = "none";
           
        }
    });

    document.getElementById("COD").addEventListener("change", function() {
        var bankingOptions = document.getElementById("banking-options");
        if (this.checked) {
            bankingOptions.style.display = "none";
        }
    });
    

        renderCart();
        document.getElementById("payment-method").addEventListener("change", function() {
    var selectedOption = this.value;
    if (selectedOption === "paypal") {
        window.location.href = "./Payment.html"; // Chuy·ªÉn h∆∞·ªõng ƒë·∫øn trang thanh to√°n PayPal
    } else if (selectedOption === "momo") {
        // Chuy·ªÉn h∆∞·ªõng ƒë·∫øn trang thanh to√°n Momo
        window.location.href = "./Momo.html";
    } else if (selectedOption === "atm") {
        // Chuy·ªÉn h∆∞·ªõng ƒë·∫øn trang thanh to√°n qua ATM
        window.location.href = "./Visa.html";
    }
});

// R√†ng bu·ªôc
function validateInputs() {
            // Get input values
            let nameholder = document.getElementById("nameholder").value;
            let address = document.getElementById("address").value;
            

            // Perform validation
            if (!nameholder || !address ) {
                alert("Nh·∫≠p ƒë·∫ßy ƒë·ªß t√™n v√† ƒë·ªãa ch·ªâ giao h√†ng.");
                return; // Stop further processing if any field is empty
            }

            // If all inputs are filled, proceed to the next step
            window.location.href = "./checkOut.html";
        }
    </script>
</body>

</html>